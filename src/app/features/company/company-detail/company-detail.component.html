<div class="w-full min-h-screen bg-white">
    @if (isLoading()) {
    <div class="flex flex-col items-center justify-center py-16 text-gray-500 animate-pulse">
        <mat-icon class="text-5xl mb-2 text-blue-400">hourglass_empty</mat-icon>
        <p class="text-lg font-medium">Đang tải thông tin công ty...</p>
    </div>
    }
    @else if (company()) {
    <!-- Breadcrumb -->
    <div class="w-full bg-white border-b border-gray-200 mt-24">
        <div class="max-w-6xl mx-auto px-4 py-4">
            <app-breadcrumb [items]="[
                    { label: 'Home', link: '/' },
                    { label: 'Companies', link: '/companies' },
                    { label: company()?.name }
                ]"></app-breadcrumb>
        </div>
    </div>

    <!-- Header Card -->
    <div class="w-full"
         style="background: #f8f8fd; padding-top: 3.5rem; padding-bottom: 3.5rem;">
        <div class="max-w-6xl mx-auto px-4">
            <div
                 class="flex flex-col md:flex-row items-start gap-6 bg-white rounded-2xl shadow-sm px-8 py-8 border border-gray-200">
                <!-- Logo -->
                <div class="flex-shrink-0 bg-gray-50 rounded-2xl p-4 w-32 h-32 flex items-center justify-center">
                    <img [src]="company()?.logo || 'assets/images/default_company.png'"
                         [alt]="company()?.name"
                         class="w-20 h-20 object-contain" />
                </div>

                <!-- Company Info -->
                <div class="flex-1">
                    <div class="flex items-center gap-3 mb-3">
                        <h1 class="text-3xl font-bold text-gray-900">{{ company()?.name }}</h1>
                        <span class="bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-sm font-medium">
                            {{ company()?.employeeCount || 0 }} Jobs
                        </span>
                    </div>
                    @if (company()?.website) {
                    <a [href]="company()?.website"
                       target="_blank"
                       class="flex items-center gap-2 text-blue-600 hover:underline text-sm mb-4">
                        <mat-icon class="text-blue-500 text-lg">public</mat-icon>
                        {{ company()?.website }}
                    </a>
                    }
                    <div class="flex flex-wrap gap-6 text-sm text-gray-600">
                        <div class="flex items-center gap-2">
                            <mat-icon class="text-blue-500 text-lg">event</mat-icon>
                            <div>
                                <div class="text-xs text-gray-500">Founded</div>
                                <div class="font-semibold">{{ company()?.foundedDate || 'N/A' }}</div>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <mat-icon class="text-blue-500 text-lg">groups</mat-icon>
                            <div>
                                <div class="text-xs text-gray-500">Employees</div>
                                <div class="font-semibold">{{ company()?.companySize || 'N/A' }}</div>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <mat-icon class="text-blue-500 text-lg">location_on</mat-icon>
                            <div>
                                <div class="text-xs text-gray-500">Location</div>
                                <div class="font-semibold">{{ company()?.address || 'N/A' }}</div>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <mat-icon class="text-blue-500 text-lg">business</mat-icon>
                            <div>
                                <div class="text-xs text-gray-500">Industry</div>
                                <div class="font-semibold">{{ company()?.industry || 'N/A' }}</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Content Area -->
    <div class="w-full bg-white py-8">
        <div class="max-w-6xl mx-auto px-4">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Left Column: Company Profile + Contact -->
                <div class="lg:col-span-2 space-y-8">
                    <!-- Company Profile -->
                    <div>
                        <h2 class="text-2xl font-bold text-gray-900 mb-4">Company Profile</h2>
                        <div class="text-gray-700 leading-relaxed space-y-4"
                             [ngClass]="{ 'max-h-40 overflow-hidden': !isProfileExpanded }"
                             [innerHTML]="company()?.description"></div>
                        <button mat-button
                                color="primary"
                                class="mt-2"
                                (click)="isProfileExpanded = !isProfileExpanded">
                            {{ isProfileExpanded ? 'Show less' : 'Read more' }}
                            <mat-icon>{{ isProfileExpanded ? 'expand_less' : 'expand_more' }}</mat-icon>
                        </button>
                    </div>

                    <!-- Contact -->
                    <div>
                        <h2 class="text-2xl font-bold text-gray-900 mb-4">Contact</h2>
                        <div class="flex flex-wrap gap-3">
                            @if (company()?.socialLinks?.twitter) {
                            <a [href]="company()?.socialLinks?.twitter"
                               target="_blank"
                               class="inline-flex items-center gap-2 px-4 py-2 rounded-lg border border-blue-400 text-blue-500 hover:bg-blue-50 transition-colors text-sm font-medium">
                                <svg class="w-4 h-4"
                                     fill="currentColor"
                                     viewBox="0 0 24 24">
                                    <path
                                          d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z" />
                                </svg>
                                twitter.com/{{ company()?.name }}
                            </a>
                            }
                            @if (company()?.socialLinks?.facebook) {
                            <a [href]="company()?.socialLinks?.facebook"
                               target="_blank"
                               class="inline-flex items-center gap-2 px-4 py-2 rounded-lg border border-blue-400 text-blue-500 hover:bg-blue-50 transition-colors text-sm font-medium">
                                <svg class="w-4 h-4"
                                     fill="currentColor"
                                     viewBox="0 0 24 24">
                                    <path
                                          d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z" />
                                </svg>
                                facebook.com/{{ company()?.name }}
                            </a>
                            }
                            @if (company()?.socialLinks?.linkedin) {
                            <a [href]="company()?.socialLinks?.linkedin"
                               target="_blank"
                               class="inline-flex items-center gap-2 px-4 py-2 rounded-lg border border-blue-400 text-blue-500 hover:bg-blue-50 transition-colors text-sm font-medium">
                                <svg class="w-4 h-4"
                                     fill="currentColor"
                                     viewBox="0 0 24 24">
                                    <path
                                          d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z" />
                                </svg>
                                linkedin.com/company/{{ company()?.name }}
                            </a>
                            }
                        </div>
                    </div>

                    <!-- Cover image -->
                    @if (company()?.coverImage) {
                    <div class="my-12">
                        <img [src]="company()?.coverImage || 'assets/images/company-cover-default.jpg'"
                             [alt]="company()?.name + ' cover'"
                             class="company-cover w-full rounded-xl object-cover shadow-md" />
                    </div>
                    }

                    <!-- Benefits field (new) -->
                    @if (company()?.benefits) {
                    <div class="mt-6 bg-white rounded-xl">
                        <h2 class="text-2xl font-bold text-gray-900 mb-3">Benefits</h2>
                        <div class="text-gray-700 leading-relaxed"
                             [innerHTML]="company()?.benefits"></div>
                    </div>
                    }
                </div>

                <!-- Right Column: Tech Stack -->
                <div>
                    <div class="bg-white rounded-xl p-6 border border-gray-200">
                        <h2 class="text-lg font-bold text-gray-900 mb-4">Tech stack</h2>
                        <p class="text-gray-500 text-sm mb-4">Learn about the technology and tools that {{
                            company()?.name }} uses.</p>
                        <div class="grid grid-cols-3 gap-4 mb-4">
                            <div class="flex flex-col items-center gap-2 tech-item cursor-pointer">
                                <div class="w-16 h-16 rounded-lg flex items-center justify-center"
                                     style="background: linear-gradient(135deg, #f9d29d 0%, #ffd6e0 100%);">
                                    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/html5/html5-original.svg"
                                         alt="HTML5"
                                         class="w-10 h-10 tech-icon-rotate" />
                                </div>
                                <span class="text-xs text-gray-600 font-medium">HTML 5</span>
                            </div>
                            <div class="flex flex-col items-center gap-2 tech-item cursor-pointer">
                                <div class="w-16 h-16 rounded-lg flex items-center justify-center"
                                     style="background: linear-gradient(135deg, #b2fefa 0%, #0ed2f7 100%);">
                                    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/css3/css3-original.svg"
                                         alt="CSS3"
                                         class="w-10 h-10 tech-icon-rotate" />
                                </div>
                                <span class="text-xs text-gray-600 font-medium">CSS 3</span>
                            </div>
                            <div class="flex flex-col items-center gap-2 tech-item cursor-pointer">
                                <div class="w-16 h-16 rounded-lg flex items-center justify-center"
                                     style="background: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%);">
                                    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/javascript/javascript-original.svg"
                                         alt="JavaScript"
                                         class="w-10 h-10 tech-icon-rotate" />
                                </div>
                                <span class="text-xs text-gray-600 font-medium">JavaScript</span>
                            </div>
                            <div class="flex flex-col items-center gap-2 tech-item cursor-pointer">
                                <div class="w-16 h-16 rounded-lg flex items-center justify-center"
                                     style="background: linear-gradient(135deg, #fbc2eb 0%, #a6c1ee 100%);">
                                    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/ruby/ruby-original.svg"
                                         alt="Ruby"
                                         class="w-10 h-10 tech-icon-rotate" />
                                </div>
                                <span class="text-xs text-gray-600 font-medium">Ruby</span>
                            </div>
                            <div class="flex flex-col items-center gap-2 tech-item cursor-pointer">
                                <div class="w-16 h-16 rounded-lg flex items-center justify-center"
                                     style="background: linear-gradient(135deg, #cfd9df 0%, #e2ebf0 100%);">
                                    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/mysql/mysql-original.svg"
                                         alt="MySQL"
                                         class="w-10 h-10 tech-icon-rotate" />
                                </div>
                                <span class="text-xs text-gray-600 font-medium">MySQL</span>
                            </div>
                            <div class="flex flex-col items-center gap-2 tech-item cursor-pointer">
                                <div class="w-16 h-16 rounded-lg flex items-center justify-center"
                                     style="background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);">
                                    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/angularjs/angularjs-original.svg"
                                         alt="Angular"
                                         class="w-10 h-10 tech-icon-rotate" />
                                </div>
                                <span class="text-xs text-gray-600 font-medium">Angular</span>
                            </div>
                        </div>
                        <button mat-button
                                color="primary"
                                class="w-full">
                            View tech stack
                            <mat-icon>arrow_forward</mat-icon>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Open Jobs Section -->
    <div class="w-full bg-gray-50 py-12 open-jobs-bg">
        <div class="max-w-6xl mx-auto px-4">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-gray-900">Open Jobs</h2>
                <button class="inline-flex items-center gap-2 text-blue-600 hover:text-blue-700 font-semibold">
                    Show all jobs
                    <mat-icon class="text-lg">arrow_forward</mat-icon>
                </button>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                @for (job of company()?.jobs ?? []; track job.id) {
                <div
                     class="bg-white rounded-xl p-6 border border-gray-200 hover:shadow-lg transition-all cursor-pointer group">
                    <div class="flex items-start gap-4 mb-4">
                        <div
                             class="w-14 h-14 rounded-lg bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center flex-shrink-0">
                            <img [src]="job.logo || company()?.logo || 'assets/images/default_company.png'"
                                 [alt]="job.name || company()?.name"
                                 class="w-10 h-10 object-contain rounded" />
                        </div>
                        <div class="flex-1">
                            <h3
                                class="text-lg font-bold text-gray-900 group-hover:text-blue-600 transition-colors mb-1">
                                {{ job.name }}
                            </h3>
                            <div class="flex items-center gap-2 text-sm text-gray-600">
                                <span>{{ company()?.name }}</span>
                                <span *ngIf="job.location">•</span>
                                <span *ngIf="job.location">{{ job.location }}</span>
                            </div>
                        </div>
                    </div>
                    <div class="flex flex-wrap gap-2 mb-4">
                        <span class="bg-green-50 text-green-700 px-3 py-1 rounded-full text-xs font-medium">
                            {{ job.level || 'Full-Time' }}
                        </span>

                    </div>
                </div>
                }
            </div>
        </div>
    </div>
    }
</div>