<div class="company-list-container">
    <!-- Header Section with Breadcrumb -->
    <section class="header-section">
        <!-- <div class="container">
            <app-breadcrumb [items]="[
                { label: 'Home', link: '/' },
                { label: 'Find Companies' }
            ]"></app-breadcrumb>
        </div> -->
    </section>

    <!-- Search Section -->
    <section class="search-section">
        <div class="container">
            <div class="search-header">
                <h1 class="search-title">
                    Find your
                    <span class="dream-job-wrapper">
                        <span class="dream-job">dream company</span>
                        <svg class="dream-job-underline" viewBox="0 0 260 40">
                            <path class="dream-job-underline-path" d="M5 25 C 60 45, 160 5, 255 20" />
                        </svg>
                    </span>
                </h1>
                <p class="search-subtitle">
                    Discover amazing companies and explore career opportunities at top organizations
                </p>
            </div>

            <app-search-box [searchPlaceholder]="searchPlaceholder" [locationPlaceholder]="locationPlaceholder"
                [buttonText]="searchButtonText" [showSuggestions]="false" (search)="onSearch($event)">
            </app-search-box>
        </div>
    </section>

    <!-- Company List Content Section -->
    <section class="content-section">
        <div class="container">
            <div class="content-wrapper">
                <!-- Left Sidebar - Filters -->
                <aside class="filter-sidebar">
                    <!-- Industry -->
                    <div class="filter-group">
                        <div class="filter-header">
                            <h3>Industry</h3>
                            <button class="toggle-btn">−</button>
                        </div>
                        <div class="filter-options">
                            <label class="filter-option" *ngFor="let industry of industries">
                                <input type="checkbox" (change)="onFilterChange('industry', industry.value)">
                                <span class="option-label">{{ industry.label }}</span>
                                <span class="option-count">({{ industry.count }})</span>
                            </label>
                        </div>
                    </div>

                    <!-- Company Size -->
                    <div class="filter-group">
                        <div class="filter-header">
                            <h3>Company Size</h3>
                            <button class="toggle-btn">−</button>
                        </div>
                        <div class="filter-options">
                            <label class="filter-option" *ngFor="let size of companySizes">
                                <input type="checkbox" (change)="onFilterChange('size', size.value)">
                                <span class="option-label">{{ size.label }}</span>
                                <span class="option-count">({{ size.count }})</span>
                            </label>
                        </div>
                    </div>
                </aside>

                <!-- Right Content - Company List -->
                <main class="company-list-content">
                    <div class="company-list-header">
                        <div class="header-left">
                            <h2>All Companies</h2>
                            <p class="company-count">Showing <strong>{{ totalCompanies }}</strong> results</p>
                        </div>
                        <div class="header-right">
                            <div class="sort-dropdown">
                                <label>Sort by:</label>
                                <select [(ngModel)]="sortBy" (change)="onSortChange()">
                                    <option value="relevant">Most relevant</option>
                                    <option value="newest">Newest</option>
                                    <option value="name-asc">Name: A to Z</option>
                                    <option value="name-desc">Name: Z to A</option>
                                </select>
                            </div>
                            <div class="view-toggle">
                                <button class="view-btn" [class.active]="viewMode === 'grid'"
                                    (click)="setViewMode('grid')" title="Grid view">
                                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                        <rect x="2" y="2" width="7" height="7" rx="1" stroke="currentColor"
                                            stroke-width="1.5" />
                                        <rect x="11" y="2" width="7" height="7" rx="1" stroke="currentColor"
                                            stroke-width="1.5" />
                                        <rect x="2" y="11" width="7" height="7" rx="1" stroke="currentColor"
                                            stroke-width="1.5" />
                                        <rect x="11" y="11" width="7" height="7" rx="1" stroke="currentColor"
                                            stroke-width="1.5" />
                                    </svg>
                                </button>
                                <button class="view-btn" [class.active]="viewMode === 'list'"
                                    (click)="setViewMode('list')" title="List view">
                                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                        <rect x="2" y="3" width="16" height="3" rx="1" fill="currentColor" />
                                        <rect x="2" y="8.5" width="16" height="3" rx="1" fill="currentColor" />
                                        <rect x="2" y="14" width="16" height="3" rx="1" fill="currentColor" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>

                    @if (isLoading) {
                    <app-card-skeleton [viewMode]="viewMode" [count]="8" [showDescription]="true" [showFooter]="true">
                    </app-card-skeleton>
                    } @else {
                    <div class="company-items" [class.grid-view]="viewMode === 'grid'"
                        [class.list-view]="viewMode === 'list'">
                        @for (company of companies; track company.id) {
                        <div class="company-card" [class.list-card]="viewMode === 'list'"
                            [class.grid-card]="viewMode === 'grid'">
                            <div class="company-card-header">
                                <div class="company-logo">
                                    <img [src]="company.logo || 'assets/images/default-company.png'"
                                        [alt]="company.name">
                                </div>
                                <div class="company-info">
                                    <h3 class="company-name">{{ company.name }}</h3>
                                    <div class="company-location">
                                        <span class="company-industry">{{ company.industry || 'Technology' }}</span>
                                        <span class="separator">•</span>
                                        <span class="location">{{ company.address || 'Remote' }}</span>
                                    </div>
                                    <div class="company-tags">
                                        <span class="tag tag-business">Business</span>
                                        <span class="tag-divider"></span>
                                        <span class="tag tag-size">{{ company.companySize || '1-50' }} employees</span>
                                    </div>
                                </div>
                            </div>

                            <p class="company-description" *ngIf="viewMode === 'grid'">{{ company.description || 'No
                                description available' }}</p>

                            <!-- Grid View Layout -->
                            <div *ngIf="viewMode === 'grid'" class="company-footer-grid">
                                <span class="job-count">7 Jobs available</span>
                                <a [routerLink]="['/companies', company.id]" class="btn-view">View Company</a>
                            </div>

                            <!-- List View Layout -->
                            <div *ngIf="viewMode === 'list'" class="company-footer-list">
                                <span class="job-count">7 Jobs available</span>
                                <a [routerLink]="['/companies', company.id]" class="btn-view">View Company</a>
                            </div>
                        </div>
                        }
                    </div>

                    <!-- Paginator -->
                    <app-paginator [length]="totalCompanies" [pageSize]="pageSize" [pageSizeOptions]="pageSizeOptions"
                        [pageIndex]="currentPage - 1" [showFirstLastButtons]="true" (page)="onPageChange($event)">
                    </app-paginator>
                    }
                </main>
            </div>
        </div>
    </section>
</div>