<!-- Wrapper div tổng cho header -->
<div class="w-full border-b border-gray-200 header-container"
     [class.header-hidden]="!isHeaderVisible"
     [class.header-scrolled]="isHeaderScrolled">
    <div class="px-6"> <!-- Xóa max-w-6xl mx-auto để header full width, chỉ giữ padding ngang -->
        <div class="flex items-center justify-between h-16 header-inner">
            <!-- Logo -->
            <a routerLink="/"
               class="flex items-center space-x-2 text-2xl font-bold text-gray-800 logo">
                <mat-icon class="text-blue-600"
                          style="font-size: 2rem; width: 2rem; height: 2rem; line-height: 1;"
                          class="logo-icon">business_center</mat-icon>
                <span class="logo-text">MyJob</span>
            </a>

            <!-- Navigation links -->
            <nav class="flex items-center space-x-6 nav-links">
                <a routerLink="/"
                   routerLinkActive="active-top-link"
                   [routerLinkActiveOptions]="{exact: true}"
                   class="text-gray-700 hover:text-blue-600 transition-colors font-medium border-b-2 border-transparent hover:border-blue-600 pb-2.5">
                    {{ 'HEADER.HOME' | translate }}
                </a>
                <a routerLink="/jobs"
                   routerLinkActive="active-top-link"
                   class="text-gray-700 hover:text-blue-600 transition-colors font-medium border-b-2 border-transparent hover:border-blue-600 pb-2.5">
                    {{ 'HEADER.FIND_JOB' | translate }}
                </a>
                <a routerLink="/companies"
                   routerLinkActive="active-top-link"
                   class="text-gray-700 hover:text-blue-600 transition-colors font-medium border-b-2 border-transparent hover:border-blue-600 pb-2.5">
                    {{ 'HEADER.EMPLOYERS' | translate }}
                </a>
                <a href="#"
                   class="text-gray-700 hover:text-blue-600 transition-colors font-medium border-b-2 border-transparent hover:border-blue-600 pb-2.5">
                    {{ 'HEADER.CANDIDATES' | translate }}
                </a>
                <a href="#"
                   class="text-gray-700 hover:text-blue-600 transition-colors font-medium border-b-2 border-transparent hover:border-blue-600 pb-2.5">
                    {{ 'HEADER.PRICING_PLANS' | translate }}
                </a>
                <a href="#"
                   class="text-gray-700 hover:text-blue-600 transition-colors font-medium border-b-2 border-transparent hover:border-blue-600 pb-2.5">
                    {{ 'HEADER.CUSTOMER_SUPPORTS' | translate }}
                </a>
            </nav>

            <!-- Right side: phone, language, auth -->
            <div class="flex items-center space-x-4 header-actions">
                <button mat-button
                        [matMenuTriggerFor]="languageMenu"
                        class="flex items-center text-gray-700 lang-btn">
                    @if (currentLanguage) {
                    <span class="flex items-center">
                        <img [src]="currentLanguage.flag"
                             [alt]="currentLanguage.name"
                             class="w-5 h-4 mr-2 lang-flag">
                        <span class="font-medium lang-name">{{ currentLanguage.name }}</span>
                    </span>
                    }
                    <mat-icon class="text-lg ml-1 lang-icon">expand_more</mat-icon>
                </button>
                <mat-menu #languageMenu="matMenu">
                    @for (lang of languages; track lang.code) {
                    <button mat-menu-item
                            (click)="changeLanguage(lang.code)">
                        <img [src]="lang.flag"
                             [alt]="lang.name"
                             class="w-5 h-3.5 mr-2 inline-block lang-flag">
                        {{ lang.name }}
                    </button>
                    }
                </mat-menu>
                
                <!-- Show Sign In button if not logged in -->
                @if (!currentUser) {
                    <button mat-stroked-button
                            routerLink="/auth/login"
                            class="!border-blue-600 !text-blue-600 !font-medium hover:!bg-blue-50 !px-6 !rounded-full sign-in-btn">
                        {{ 'HEADER.SIGN_IN' | translate }}
                    </button>
                }
                
                <!-- Show user menu if logged in -->
                @if (currentUser) {
                    <button mat-button
                            [matMenuTriggerFor]="userMenu"
                            class="flex items-center user-menu-btn">
                        <mat-icon class="text-4xl mr-2">account_circle</mat-icon>
                        <span class="font-medium">{{ currentUser.name }}</span>
                        <mat-icon class="text-lg ml-1">expand_more</mat-icon>
                    </button>
                    <mat-menu #userMenu="matMenu" panelClass="transparent-menu">
                        <button mat-menu-item routerLink="/profile">
                            <mat-icon>person</mat-icon>
                            <span>Profile</span>
                        </button>
                        <button mat-menu-item routerLink="/my-applications">
                            <mat-icon>work</mat-icon>
                            <span>My Applications</span>
                        </button>
                        <button mat-menu-item routerLink="/settings">
                            <mat-icon>settings</mat-icon>
                            <span>Settings</span>
                        </button>
                        <mat-divider></mat-divider>
                        <button mat-menu-item (click)="logout()">
                            <mat-icon>logout</mat-icon>
                            <span>Logout</span>
                        </button>
                    </mat-menu>
                }
            </div>
        </div>
    </div>
</div>